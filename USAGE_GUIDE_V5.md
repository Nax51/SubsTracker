# SubsTracker V5 使用指南

## 📚 目錄

1. [快速開始](#快速開始)
2. [訂閱管理](#訂閱管理)
3. [財務功能](#財務功能)
4. [系統設定](#系統設定)
5. [最佳實踐](#最佳實踐)
6. [疑難排解](#疑難排解)

---

## 🚀 快速開始

### 首次登入
1. 開啟您的 SubsTracker 網址
2. 使用預設帳號密碼登入：
   - 帳號：`admin`
   - 密碼：`password`
3. **立即前往系統設定修改密碼**

### 基本設定流程
1. **修改管理員密碼** - 確保系統安全
2. **配置通知服務** - 設定 Telegram 或 NotifyX
3. **測試通知功能** - 確認提醒系統正常
4. **檢查匯率狀態** - 驗證匯率 API 運作
5. **新增第一個訂閱** - 開始使用系統

---

## 📊 訂閱管理

### 新增訂閱

#### 基本資訊
- **服務名稱**: 如 "Netflix"、"Spotify"
- **服務類別**: 串流媒體、軟體、AI工具等
- **開始日期**: 服務開始使用日期
- **到期日期**: 服務到期日期
- **提醒天數**: 提前幾天提醒（0=只在到期日）

#### 價格資訊
- **價格**: 服務費用
- **貨幣**: TWD、USD、CNY、EUR、JPY
- **購買平台**: 淘寶、蝦皮、官方網站等
- **訂閱週期**: 月訂、年訂、自定義週期

#### 進階設定
- **自動續訂**: 標記是否會自動扣款
- **備註**: 額外說明，如優惠資訊

### 管理現有訂閱

#### 訂閱列表功能
- **快速檢視**: 月費、到期時間、續訂狀態
- **排序**: 按到期日期自動排序
- **狀態標示**: 
  - 🟢 正常 (距離到期 > 提醒天數)
  - 🟡 即將到期 (距離到期 <= 提醒天數)
  - 🔴 已到期

#### 操作按鈕
- **詳情**: 查看完整的服務歷史和統計
- **編輯**: 修改訂閱資訊和設定

### 服務詳情頁面

#### 訂閱概覽
- **基本資訊**: 名稱、類別、狀態
- **當前計劃**: 現行價格、週期、平台
- **重要日期**: 開始、到期、下次提醒

#### 財務統計
- **總花費**: 累計所有購買金額（統一貨幣）
- **總月數**: 累計使用月數
- **平均月費**: 總花費 ÷ 總月數
- **平台數量**: 使用過的購買平台總數

#### 購買歷史時間軸
- **時間順序**: 按購買日期排列
- **購買詳情**: 日期、價格、平台、時長
- **操作功能**: 編輯、刪除購買記錄

---

## 💰 財務功能

### 多貨幣支援

#### 支援的貨幣
- **TWD** (台幣) - 預設顯示貨幣
- **USD** (美元) - 國際服務常用
- **CNY** (人民幣) - 淘寶等平台
- **EUR** (歐元) - 歐洲服務
- **JPY** (日圓) - 日本服務

#### 匯率轉換
- **自動轉換**: 所有金額自動轉為 TWD 顯示
- **購買時匯率**: 記錄購買當下的匯率
- **實時匯率**: 顯示當前最新匯率

### 購買歷史管理

#### 新增購買記錄
1. 進入服務詳情頁面
2. 點擊「新增購買記錄」
3. 填寫購買資訊：
   - **購買日期**: 實際付款日期
   - **服務期間**: 開始和結束日期
   - **價格與貨幣**: 實際付款金額
   - **購買平台**: 購買通路
   - **時長**: 購買的服務時長
   - **備註**: 優惠資訊、促銷代碼等

#### 編輯購買記錄
- 點擊任何購買記錄的「編輯」按鈕
- 修改任意欄位並儲存
- 系統會自動重新計算統計資料

#### 刪除購買記錄
- **多筆記錄**: 可自由刪除
- **最後一筆**: 無法刪除，確保資料完整性
- **要刪除最後記錄**: 需要刪除整個訂閱

### 平台價格比較

#### 支援的平台
- **淘寶**: 中國電商平台
- **蝦皮**: 東南亞電商平台  
- **官方網站**: 服務商官方
- **其他**: 自定義平台名稱

#### 價格分析
- **最佳優惠**: 自動標示最划算的購買
- **平台統計**: 各平台的使用頻率
- **成本比較**: 同服務不同平台的價格差異

### 月費標準化

#### TWD/M 顯示
- **統一格式**: 所有訂閱以 "金額 TWD/M" 顯示
- **便於比較**: 不同週期的服務可直接比較
- **自動計算**: 年費自動除以12，月費直接顯示

#### 計算邏輯
```
月費 = 價格 ÷ (週期值 × 月數轉換係數)
- 日訂: 價格 × 30 ÷ 天數
- 月訂: 價格 ÷ 月數  
- 年訂: 價格 ÷ (年數 × 12)
```

---

## ⚙️ 系統設定

### 帳號管理

#### 修改密碼
1. 前往「系統設定」
2. 在「管理員帳戶」區塊
3. 輸入新密碼並儲存
4. 下次登入使用新密碼

#### 安全建議
- 使用複雜密碼（8位以上，包含數字和符號）
- 定期更換密碼
- 不要與其他服務使用相同密碼

### 通知設定

#### Telegram 設定
1. 取得 Bot Token：
   - 與 @BotFather 對話
   - 創建新 Bot
   - 複製 Token
2. 取得 Chat ID：
   - 與您的 Bot 對話
   - 發送 `/start`
   - 使用 API 查詢 Chat ID
3. 在系統中設定並測試

#### NotifyX 設定
1. 取得 API Key
2. 在系統中配置
3. 發送測試通知

#### 通知偏好
- **通知類型**: 選擇 Telegram 或 NotifyX
- **測試功能**: 確保通知正常運作
- **多通道**: 可同時啟用多種通知方式

### 匯率管理

#### API 狀態檢查
- **綠燈**: API 正常運作
- **紅燈**: API 無法連接
- **檢查按鈕**: 手動檢查 API 狀態

#### 當前匯率顯示
- **USD → TWD**: 美元對台幣
- **CNY → TWD**: 人民幣對台幣  
- **EUR → TWD**: 歐元對台幣
- **JPY → TWD**: 日圓對台幣

#### 手動更新
- 點擊「手動更新匯率」
- 強制重新獲取最新匯率
- 更新成功會顯示新的更新時間

---

## 🎯 最佳實踐

### 訂閱管理建議

#### 分類策略
- **按類型分類**: 串流媒體、軟體工具、AI服務
- **按用途分類**: 工作用、娛樂用、學習用
- **按重要性分類**: 必需、重要、可選

#### 命名規範
- **清楚明確**: "Netflix 家庭方案" 比 "Netflix" 更清楚
- **包含資訊**: "Adobe CC 學生版" 明確說明方案類型
- **避免簡稱**: 寫全名避免混淆

#### 提醒設定
- **重要服務**: 提前 7-14 天提醒
- **一般服務**: 提前 3-7 天提醒  
- **試用服務**: 提前 1-2 天提醒（避免忘記取消）

### 財務管理建議

#### 購買記錄維護
- **及時記錄**: 購買後立即新增記錄
- **詳細備註**: 記錄優惠碼、促銷資訊
- **平台標記**: 準確標記購買平台便於比價

#### 成本控制
- **定期檢視**: 每月檢查所有訂閱
- **取消不用**: 停用不常使用的服務
- **比價分析**: 利用平台比較功能尋找更便宜選項

#### 預算規劃
- **月費總和**: 查看所有訂閱的月費總計
- **年度預算**: 計算年度訂閱總支出
- **成本控制**: 設定訂閱支出上限

### 系統維護

#### 定期檢查
- **通知測試**: 每月測試通知功能
- **匯率更新**: 確保匯率資料最新
- **資料備份**: 定期檢查 KV 資料完整性

#### 效能優化
- **清理過期**: 定期清理已過期且不續用的訂閱
- **資料整理**: 合併重複或錯誤的購買記錄
- **系統更新**: 關注新版本發布

---

## 🔧 疑難排解

### 常見問題

#### 登入問題
**Q: 忘記密碼怎麼辦？**
A: 
1. 檢查 CloudFlare KV 中的 `config` 資料
2. 重新設定 `ADMIN_PASSWORD` 欄位
3. 或重新部署 Worker 使用預設密碼

**Q: 登入後頁面空白？**
A:
1. 檢查瀏覽器 Console 是否有錯誤
2. 確認 KV 綁定設定正確
3. 檢查 Worker 部署狀態

#### 通知問題
**Q: 沒有收到通知？**
A:
1. 檢查 Telegram Bot Token 是否正確
2. 確認 Chat ID 設定無誤
3. 使用「測試通知」功能檢查
4. 檢查 Cron 觸發器設定

**Q: 通知延遲？**
A:
1. CloudFlare Cron 可能有 1-2 分鐘延遲
2. 檢查 Cron 設定是否正確
3. 確認時區設定

#### 匯率問題
**Q: 匯率顯示錯誤？**
A:
1. 檢查 ExchangeRate API 狀態
2. 點擊「手動更新匯率」
3. 確認 API Key 設定正確
4. 檢查網路連接

**Q: 購買記錄匯率異常？**
A:
1. 購買時匯率會自動儲存
2. 如果當時 API 失效，會使用預設值
3. 可手動編輯購買記錄修正匯率

#### 資料問題
**Q: 購買歷史不見了？**
A:
1. 系統會自動修復空的購買歷史
2. 重新載入頁面觸發修復
3. 檢查 KV 資料是否完整

**Q: 統計數據錯誤？**
A:
1. 統計會自動重新計算
2. 編輯任何購買記錄會觸發重算
3. 確認所有購買記錄資料正確

### 進階設定

#### 自定義 Cron 時間
修改 Worker 的 Cron 觸發器：
```
0 9 * * *    # 每天上午 9:00
0 */6 * * *  # 每 6 小時檢查一次
0 9,18 * * * # 每天上午 9:00 和下午 6:00
```

#### 環境變數
在 Worker 環境變數中可設定：
```
EXCHANGE_RATE_API_KEY=your_api_key
DEFAULT_CURRENCY=TWD
DEBUG_MODE=false
```

#### KV 資料結構
主要 KV Keys：
- `subscriptions`: 訂閱資料陣列
- `config`: 系統設定
- `currency_rates`: 匯率快取

### 效能優化

#### 最佳化建議
1. **限制訂閱數量**: 建議不超過 100 個訂閱
2. **清理過期資料**: 定期刪除不需要的購買記錄
3. **匯率快取**: 避免頻繁手動更新匯率

#### 監控指標
- **回應時間**: 頁面載入應在 2 秒內
- **通知延遲**: 提醒應在設定時間的 5 分鐘內送達
- **匯率準確性**: 匯率應每日更新

---

## 📞 取得協助

如果您在使用過程中遇到問題：

1. **查看錯誤訊息**: 瀏覽器 Console 中的詳細錯誤
2. **檢查設定**: 確認所有必要設定都已完成
3. **測試功能**: 使用內建的測試功能驗證
4. **查看文件**: 參考此使用指南和 README
5. **回報問題**: 在 GitHub 上創建 Issue

### 聯繫方式
- **GitHub Issues**: 技術問題和功能建議
- **Documentation**: 詳細的 API 和設定說明
- **Community**: 使用者社群討論

---

*本指南基於 SubsTracker V5.0 版本編寫，最後更新：2025年7月*